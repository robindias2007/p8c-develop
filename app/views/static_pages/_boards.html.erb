<%# Please make sure to update 'forms/social_image.html.erb' file if this file is updated %>

<div class="" ng-controller="AppCtrl" ng-init='init(<%= @formss %>, <%= @keys %>)'>
 
    <div class="boardContainer" ng-repeat="cat_board in cat_boards">
      <div class="">
        <div class="categoryheader">
          <div class="categorytitle col-md-8" ><span>{{cat_board.category}}</span></div>
          <div class="categorytitle col-md-4">
            
            <a ng-if="cat_board.category != 'trending' && cat_board.category != 'most_viewed' && cat_board.category != 'most_recent' && cat_board.category != 'most_liked' " ng-href="/categories/{{cat_board.category}}">
              <i class="material-icons">keyboard_arrow_right</i>  
            </a>

            <a ng-if="(cat_board.category == 'trending' || cat_board.category == 'most_viewed' || cat_board.category == 'most_recent' || cat_board.category == 'most_liked')" ng-href="/{{cat_board.category}}">
              <i class="material-icons">keyboard_arrow_right</i>
            </a>
          
          </div>
          <hr>
        </div>        
        <div class="container1" ng-repeat="board in cat_board.boards"  ng-init="outerIndex=$index" ng-class="(outerIndex%3 == 0) ? 'col-md-9' : 'col-md-4 halfBoard'">
          <!-- The elements of the entire box. -->  
          <div class="col-md-12 container5" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">
              <a href="/{{board.user.username}}/{{board.slug_url}}"><h2 class="title" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">{{board.title}}</h2></a> 
            </div>
          <div class="container2" style="width: 100%">
            <div class="col-md-4" id="description" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'"> 
              <!-- Bootstrap to divide the entire page into colums -->    
              <h5 class="internal_text" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">{{board.dsc}}</h5>
            </div>
            <!--<div id="verticalLine" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'"></div>-->
            <div class="container3" style="overflow-x: hidden">
              <!-- This is for the second container. Those 5 blocks on the right side. Inside this we have 5 columns --> 
              <ul class="row" bc-flickity="{{ flickityOptions }}" style="width: 100%" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">            
                <li class="article-cell" ng-repeat="link in board.links" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">  
                  <a href="{{link.url}}" target="framename", id="formclick" >                 
                    <hr>
                    <div class="container6">
                      <figure class="effect-sadie" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">
                        
                          <img id="image" ng-src="{{link.image}}" ng-if="link.image" />
                          <img id="image" src="/assets/whiteimage-56971d179ae068f801bcbdd5c4db7d3cefcaeab1406897a4be57c0cdfe980450.jpg" alt="Whiteimage" ng-if="!link.image">                      

                             
                          <figcaption ng-if="link.note">
                            <i class="material-icons md-18">comment</i>
                            <h5>Curator Notes</h5>
                            <p class="curatorNotes">{{link.note}}</p>
                          </figcaption> 
                        
                      </figure>
                    </div>  
                    <h4 class="title1" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">
                      {{link.title}}
                    </h4>               
                    <div id="link">{{link.host}}                  
                    </div>                 
                    <br>
                    <h6 class="internal_text1">{{link.dsc}}</h6>                
                    <hr>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md-12 container4">
            <div class="container7" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">
              <div class="date" id="profile">
                <a href="/{{board.user.username}}/published">
                  <div class="user-avatar" ng-if="!(board.user_image == null)" style='background-image:url("{{board.user_image}}")'></div>
                  <i class="material-icons md-40" ng-if="(board.user_image == null)">account_circle</i>
                  <div id="prouser">{{board.user.username}}</div> 
                  <h10 class="date">{{board.updated_at | date : format : timezone}}</h10>
                </a>
              </div>         
            </div>
            <div class="container8" ng-class="(outerIndex%3 == 0) ? '' : 'halfBoard'">
            <% if user_signed_in? %>
              <div class="bookmark">   <!-- This contains all the elements to like the button where we have the heart option -->
                <h10 class="date">Save &nbsp; </h10>
                <a id="" ng-show="board.bookmark" data-remote="true" href="/forms/{{board.id}}/booknot" ng-click="update_bookmark(board)"><i class="material-icons">bookmark</i></a>
                <a id="" ng-hide="board.bookmark" data-remote="true" href="/forms/{{board.id}}/book" ng-click="update_bookmark(board)"><i class="material-icons">bookmark_border</i></a>              
                <%-# It tells you the total count or the total likes on the current form  -%>
              </div>
            <% else %>          
              <div class="bookmark">
                <h10 class="date">Save &nbsp; </h10>
                <i class="material-icons">bookmark</i>
              </div>      
            <% end %>
            <% if user_signed_in? %>
              <div class="like">   
                <!-- This contains all the elements to like the button where we have the heart option -->
                <h10 class="date">{{board.likes}} &nbsp;</h10> 
                <a id="" ng-show="board.liked" data-remote="true" href="/forms/{{board.id}}/unlike" ng-click="update_like(board, 'unlike')"><i class="material-icons">favorite</i></a>
                <a id="" ng-hide="board.liked" data-remote="true" href="/forms/{{board.id}}/like" ng-click="update_like(board, 'like')"><i class="material-icons">favorite_border</i></a>             
              </div>
            <% else %>
              <div class="like">
                <h10 class="date">{{board.likes}} &nbsp;</h10>
                <i class="material-icons">favorite</i> 
              </div>
            <% end %>  
            <div class="share">
              <div class="social-share-options" style="">
                <div class="facebook-share option">
                  <a target="_blank" href="https://www.facebook.com/dialog/share?app_id={{facebook_key}}&display=popup&href={{location}}{{board.user.username}}/{{board.slug_url}}">
                    <%= image_tag 'facebook.png' %>
                  </a>
                </div>
                <div class="twitter-share option" >
                  <a target="_blank" href="https://twitter.com/intent/tweet?url={{location}}{{board.user.username}}/{{board.slug_url}}">
                    <%= image_tag 'twitter.png' %>
                  </a>
                </div>
              </div>
              <%= link_to 'javascript:void(0)', class: 'social-share-link' do %>
                <h10 class="date">Share</h10>
                <i class="material-icons">share</i>
              <% end %>
            </div>
            </div>
            <div class="boardFooter date">        
            </div>
          </div>
        </div>
      </div>
      <br>
    </div>

</div>

