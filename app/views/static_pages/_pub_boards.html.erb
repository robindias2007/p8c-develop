<%# Please make sure to update 'forms/social_image.html.erb' file if this file is updated %>

<div class="boardContainer" ng-controller="PubBoardCtrl" ng-init="init(<%= @pub_boards %>, <%= @keys %>)">
  <style type="text/css">
    .flickity-page-dots {
      display: none;
    }
    .article-cell {
      width: 250px !important;
      border: 1px solid #e3e3e3;
      box-shadow: 0px 1px 1px #888888;
      z-index: 3;
      margin: 20px 0.5%;
      padding: 0px 15px;
      background-color:white;
    }
    .bookmark-button {
      border: none;
      background: transparent;
    }
    .bookmark-button:focus {outline:0;}
  </style>
  <div infinite-scroll='nextPage()' infinite-scroll-disabled='busy'>
    <div class="container1" ng-repeat="board in pub_boards" ng-init="outerIndex=$index" ng-class="(outerIndex%3 == 0) ? 'col-md-9' : 'col-md-4 halfBoard'">
      <!-- The elements of the entire box. -->
      <% if @forms.length == 1 %>  
        <% if current_page?(form_path(@forms.first)) %>
          <%= content_for :social_meta_tags do %>
            <%# Test the meta tags: https://cards-dev.twitter.com/validator %>
            <meta name="twitter:card" content="summary_large_image"/>
            <%# TODO: Add twitter handle as content below after creating a twitter page for Lense APP %>
            <!--<meta name="twitter:site" content="" /> -->
            <meta name="twitter:title" content="<%= @forms.first.title %>"/>
            <meta name="twitter:description" content="<%= @forms.first.description[0..200] %>"/>
            <meta name="twitter:image:src" content="<%= @forms.first.photo.url %>"/>
            <!--<meta name="twitter:image:src" content="Lense" />-->

            <%# Facebook fails to scrap the meta tags from the page if we use NGROK or some tunnel to our localhost %>
            <%# So, deploy before testing the changes in below meta tags %>
            <%# Test the meta tags: https://developers.facebook.com/tools/debug/sharing/ %>
            <meta property="og:title" content="<%= @forms.first.title %>"/>
            <meta property="og:type" content="article"/>
            <meta property="og:url" content="<%= form_url(@forms.first.id) %>"/>
            <meta property="og:image" content="<%= @forms.first.photo.url %>"/>
            <meta property="og:description" content="<%= @forms.first.description[0..200] %>"/>
          <% end %>
        <% end %>
      <% end %>
      <%= render 'static_pages/board'%>
      <% if current_user.username == @user.username %>
        <div class="footedit">
          <%= link_to 'Edit & Publish', '/forms/{{board.id}}/edit', class:"btn btn-info btn-md" %>
          <%= link_to 'Delete', '/forms/{{board.id}}', method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-info btn-md" %>  
        </div>
      <% end %>
    </div>
  </div>
</div>
<style type="text/css">
    .empty
  { 
    color: white;
    text-shadow: -2px 0 #9c1717, 0 2px #9c1717, 2px 0 #9c1717, 0 -2px #9c1717;
  }


</style>