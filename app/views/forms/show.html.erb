<%= content_for :social_meta_tags do %>
  <%# Test the meta tags: https://cards-dev.twitter.com/validator %>
  <meta name="twitter:card" content="summary_large_image"/>
  <%# TODO: Add twitter handle as content below after creating a twitter page for Lense APP %>
  <!--<meta name="twitter:site" content="" /> -->
  <meta name="twitter:title" content="<%= @forms.first.title %>"/>
  <meta name="twitter:description" content="<%= @forms.first.description[0..200] %>"/>
  <meta name="twitter:image:src" content="https://s3.us-east-2.amazonaws.com/thecurativ-master/thecurativ-logo-center.svg"/>
  <!--<meta name="twitter:image:src" content="Lense" />-->

  <%# Facebook fails to scrap the meta tags from the page if we use NGROK or some tunnel to our localhost %>
  <%# So, deploy before testing the changes in below meta tags %>
  <%# Test the meta tags: https://developers.facebook.com/tools/debug/sharing/ %>
  <meta property="og:title" content="<%= @forms.first.title %>"/>
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="<%= root_url %><%= @forms.first.user.username %>/<%= @forms.first.slug_url%>"/>
  <meta property="og:image" content="https://s3.us-east-2.amazonaws.com/thecurativ-master/thecurativ-logo-center.svg"/>
  <meta property="og:description" content="<%= @forms.first.description[0..200] %>"/>
<% end %>

<% if current_user %>
  <md-content flex>
    <%= render 'static_pages/show_board'%>
  </md-content>
<% else %>
  <md-content flex>
    <%= render 'static_pages/show_open_board'%>
  </md-content>
<% end %>


<script type="text/javascript">
$(document).on 'ajax:success', 'a.vote', (status,data,xhr)->
  # update counter
  $(".votes-count[data-id=#{data.id}]").text data.count

  # toggle links
  $("a.vote[data-id=#{data.id}]").each ->
    $a = $(this)
    href = $a.attr 'href'
    text = $a.text()
    $a.text($a.data('toggle-text')).attr 'href', $a.data('toggle-href')
    $a.data('toggle-text', text).data 'toggle-href', href
    return

  return


</script>