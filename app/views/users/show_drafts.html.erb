<div class="maincont">
  <% if user_signed_in? %>
    <div id="follow_user">
      <%= render :partial => "follows/follow_user", :locals => {:user => @user} %>
    </div>
  <% end %>
  <div class="col-md-10" id="userProfile">
    <div id="username">
    	<i class="material-icons md-120">account_circle</i>
    	<div id="userDescription">
    		<h4><%= @user.username  %></h4>
    		<h5><%= @user.author  %></h5>		
    	</div>
    </div>
    <% if current_user.username == @user.username %>
      <div class="userStats">
        <div class="formlist">
          <ul class="count">
          	<li><%= Form.published.where(user_id:current_user.id).count %></li>
          	<li><%= Form.drafts.where(user_id:current_user.id).count %></li>
          	<li><%= current_user.bookmarks.count %></li>
          </ul>
          <ul class="board">
          	<li><%= link_to 'Published', "/user/#{current_user.username }/publish", id:"board" %></li>
          	<li><%= link_to 'Drafts', "/user/#{current_user.username }/drafts", id:"board1" %></li>
          	<li><%= link_to 'Saved', "/user/#{current_user.username }/saved", id:"board2" %></li>
          </ul>
        </div>
        <ul class="followers">
        	<li><div id="following1"><%= current_user.all_following.count %></div><button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal1">Following</button></li>
        	<li></li>
        	<li><div id="followers1"><%= current_user.followers.count %></div><button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal2">Followers</button></li>
        </ul>
      </div>
    <% end %>
  </div>
  <div id="forms">
    <%= render 'static_pages/draft_boards'%>
  </div>
  <div class="modal fade" id="myModal1" role="dialog">
    <div class="modal-dialog"> 
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <div class="follow">
            <% if current_user.username == @user.username %>
              <h2> Following </h2>
              <% current_user.all_following.each do |f| %>
                <table>
                  <tr>
                    <td>
                      <% if f.avatar.present? %>
                        <%= image_tag f.avatar.url,id:"useravatar" %>
                      <% else %>
                        <%= image_tag "image.png", size:"20x20" %>
                      <% end %> 
                    </td>
                    <td>
                      <%= f.username %>
                      <hr>
                      <%= f.author %>
                    </td>
                    <td>
                      <% if user_signed_in? %>
                        <div id="follow_usermodal">
                          <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                        </div>
                      <% end %>
                    </td>
                  </tr>
                </table>
              <% end %>
            <% end %>
          </div>
          <br>
          <br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="myModal2" role="dialog">
    <div class="modal-dialog">  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <div class="follwo">
            <% if current_user.username == @user.username %>
              <h2> Followers </h2>
              <% current_user.followers.each do |f| %>
                <table>
                  <tr>
                    <td>
                      <% if f.avatar.present? %>
                        <%= image_tag f.avatar.url,id:"useravatar" %>
                      <% else %>
                        <%= image_tag "image.png", size:"20x20" %>
                      <% end %> 
                    </td>
                    <td>
                      <%= f.username %>
                      <hr>
                      <%= f.author %>
                    </td>
                    <td>
                      <div id="follow_usermodal">
                        <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                      </div>
                    </td>
                  </tr>
                </table>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>        
    </div>
  </div>
  <div class="modal fade" id="myModal3" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <div class="follow">
            <% if current_user.username != @user.username %>
              <h2> Following </h2>
              <% @user.all_following.each do |f| %>
                <table>
                  <tr>
                    <td>
                      <% if f.avatar.present? %>
                        <%= image_tag f.avatar.url,id:"useravatar" %>
                      <% else %>
                        <%= image_tag "image.png", size:"20x20" %>
                      <% end %> 
                    </td>
                    <td>
                      <%= f.username %>
                      <hr>
                      <%= f.author %>
                    </td>
                    <td>
                      <div id="follow_usermodal">
                        <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                      </div>  
                    </td>
                  </tr>
                </table>
              <% end %>
            <% end %>
            <br>
            <br>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="myModal4" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          <div class="follow">
            <% if current_user.username != @user.username %>
              <h2> Followers </h2>
              <% @user.followers.each do |f|  %>
                <table>
                  <tr>
                    <td>
                      <% if f.avatar.present? %>
                        <%= image_tag f.avatar.url,id:"useravatar" %>
                      <% else %>
                        <%= image_tag "image.png", size:"20x20" %>
                      <% end %> 
                    </td>
                    <td>
                      <%= f.username %>
                      <hr>
                      <%= f.author %>
                    </td>
                    <td>
                      <div id="follow_usermodal">
                        <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                      </div>
                    </td>
                  </tr>
                </table>
              <% end %>
            <% end %>
          </div>
          <br>
          <br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>  
    </div>
  </div>
</div>