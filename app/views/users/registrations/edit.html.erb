<div class="modal fade custom-modal" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        Edit <%= resource_name.to_s.humanize %>
      </div>
      <div class="modal-body">
        <div class="edit-user">
          <%= render partial: 'profile_form' %>

          <h3>Cancel my account</h3>

          <p>Unhappy? <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class:"changepass" %></p>

          <%= link_to "Back", :back %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    $(document).ready(function () {
        $("#editUserModal").modal({
            keyboard: false,
            backdrop: 'static'
        });

        $(".changepass").click(function () {
            $("#newpass").show();
            $("#newpasscof").show();
        });
        
        $('#user_avatar').change(function (e) {
            var file = e.target.files[0];
            var preview = $('.preview');
            var reader = new FileReader();

            reader.addEventListener('load', function () {
                var image = new Image();
                image.src = reader.result;
                preview.html(image);
            }, false);

            if(file) {
                reader.readAsDataURL(file);
            }
        })
    })
</script>