<div class="maincont">

  <% if user_signed_in? %>
    <div id="follow_user">
      <br>
      <%= render :partial => "follows/follow_user", :locals => {:user => @user} %>
    </div>
  <% end %>


  <div class="col-md-10" id="userProfile">
    <div id="username">
    	<i class="material-icons md-120">account_circle</i>
    	<div id="userDescription">
    		<h4><%= @user.username  %></h4>
    		<h5><%= @user.author  %></h5>		
    	</div>
    </div>



    <% if current_user.username == @user.username %>


    <div class="userStats">
      <div class="formlist">
        <ul class="count">
        	<li><%= Form.published.where(user_id:current_user.id).count %></li>
        	<li><%= Form.drafts.where(user_id:current_user.id).count %></li>
        	<li><%= current_user.bookmarks.count %></li>
        </ul>

        <ul class="board">
        	<li><%= link_to 'Published', "/user/#{current_user.username }/publish", id:"board" %></li>
        	<li><%= link_to 'Drafts', "/user/#{current_user.username }/drafts", id:"board1" %></li>
        	<li><%= link_to 'Saved', "/user/#{current_user.username }/saved", id:"board2" %></li>
        </ul>
      </div>

      <ul class="followers">
      	<li><div id="following1"><%= current_user.all_following.count %></div><button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal1">Following</button></li>
      	<li></li>
      	<li><div id="followers1"><%= current_user.followers.count %></div><button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal2">Followers</button></li>
      	</ul>
      </div>
    </div>


    <% else %>

    <div class="userStats">
      <div class="formlist">
        <ul class="count">
        	<li></li>
        	<li><%= Form.published.where("user_id = ?",User.find_by_username(params[:id])).count %></li>
          <li><%= @user.get_up_voted(Form).count %></li>
        	<li></li>
        </ul>

        <ul class="board">
        	<li></li>
        	<li><a href= "/user/<%= @user.username  %>/publish", id="board1">Published</a></li>
          <li><a href= "/user/<%= @user.username  %>/liked", id="board1">Liked</a></li>
        	<li></li>
        </ul>

        <ul class="followers">
        	<li><div id="following"><%= @user.all_following.count %></div>  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal3">Following</button>
        </li>
        	<li></li>
        	<li><div id="followers"><%= @user.followers.count %></div>  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal4">Followers</button>
        </li>
        	</ul>
      </div>
    </div>
  </div>

  <% end %>

  <div id="forms">
    <%= render 'static_pages/pub_boards' %>
  </div>
  <%= will_paginate @forms %>
  
  </div>

  <div class="modal fade" id="myModal1" role="dialog">
      <div class="modal-dialog">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body">
            <div class="follow">
  			<% if current_user.username == @user.username %>
  			    <h2> Following </h2>
  			    <% current_user.all_following.each do |f| %>
  			    <table>
              <tr>
                <td>
                <% if f.avatar.present? %>
                <%= image_tag f.avatar.url,id:"useravatar" %>
                <% else %>
                <%= image_tag "image.png", size:"20x20" %>
                <% end %> 
                </td>
                <td><%= f.username %>
                <hr>
                <%= f.author %></td>
                <td>
                  <% if user_signed_in? %>
                  <div id="follow_usermodal">
                    <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                  </div>
                  <% end %>
                </td>
              </tr>
            </table>
  			    <% end %>
  			</div>
  			<% end %>
  			<br>
  			<br>
  			</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>



  <div class="modal fade" id="myModal2" role="dialog">
      <div class="modal-dialog">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body">
            <div class="follwo">
  			<% if current_user.username == @user.username %>
  			    <h2> Followers </h2>
  			    <% current_user.followers.each do |f| %>
  			    <table>
              <tr>
                <td>
                <% if f.avatar.present? %>
                <%= image_tag f.avatar.url,id:"useravatar" %>
                <% else %>
                <%= image_tag "image.png", size:"20x20" %>
                <% end %> 
                </td>
                <td><%= f.username %>
                <hr>
                <%= f.author %></td>
                <td>
                  <div id="follow_usermodal">
                    <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                  </div>
                </td>
              </tr>
            </table>
  			    <% end %>
  			<% end %>
  			</div>

  			</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>


  <div class="modal fade" id="myModal3" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body">
            <div class="follow">
  			<% if current_user.username != @user.username %>
  			    <h2> Following </h2>
  			    <% @user.all_following.each do |f| %>
                  <table>
  	                <tr>
  		                <td>
  		                <% if f.avatar.present? %>
                      <%= image_tag f.avatar.url,id:"useravatar" %>
                      <% else %>
                      <%= image_tag "image.png", size:"20x20" %>
                      <% end %>	
  		                </td>
  		                <td><%= f.username %>
  		                <hr>
  		                <%= f.author %></td>
  		                <td>
                      <div id="follow_usermodal">
                        <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                      </div>  
                      </td>
  				    </tr>
  			    </table>
  			    <% end %>
  			</div>
  			<% end %>
  			<br>
  			<br>
  			</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>

  <div class="modal fade" id="myModal4" role="dialog">
      <div class="modal-dialog">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"></h4>
          </div>
          <div class="modal-body">
            <div class="follow">
        			<% if current_user.username != @user.username %>
        			    <h2> Followers </h2>
        			    <% @user.followers.each do |f|  %>
                  <table>
                    <tr>
          			      <td>
                        <% if f.avatar.present? %>
                          <%= image_tag f.avatar.url,id:"useravatar" %>
                        <% else %>
                          <%= image_tag "image.png", size:"20x20" %>
                        <% end %> 
                        </td>
                        <td><%= f.username %>
                        <hr>
                        <%= f.author %></td>
                        <td>
                        <div id="follow_usermodal">
                          <%= render :partial => "follows/follow_usermodal", :locals => {:f => f} %>
                        </div>
                        </td>
                    </tr>
                  </table>
        			    <% end %>
  			  </div>
  			<% end %>
  			</div>
  			<br>
  			<br>
  			</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>

</div>
